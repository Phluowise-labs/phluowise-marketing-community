<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Phluowise Marketing Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Inter", sans-serif;
        background-color: #000000;
        color: #e5e7eb;
        transition: background-color 0.3s ease;
      }

      /* The glassmorphism effect */
      .glass {
        background-color: rgba(255, 255, 255, 0.05);
        -webkit-backdrop-filter: blur(10px);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.1);
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.4);
      }

      .btn-primary {
        background-color: #3b74ff;
        color: white;
        padding: 0.75rem 1.5rem;
        border-radius: 0.75rem;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        transition: background-color 0.3s;
        border: none;
        cursor: pointer;
      }
      
      .btn-primary:hover {
        background-color: #2e5cdb;
      }
      
      .form-input {
        width: 100%;
        padding: 0.75rem;
        border: 1px solid #374151;
        border-radius: 0.75rem;
        background-color: #1a1a1a;
        color: #e5e7eb;
      }
      
      .form-input:focus {
        outline: none;
        box-shadow: 0 0 0 2px #3b74ff;
      }
      
      .btn-primary:focus {
        outline: none;
        box-shadow: 0 0 0 2px #3b74ff;
      }
      
      /* Dashboard card styles */
      .dashboard-card {
        background-color: rgba(255, 255, 255, 0.05);
        -webkit-backdrop-filter: blur(10px);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 2rem;
        padding: 2.5rem;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.4);
      }
      
      /* Text colors */
      .text-gray-600 {
        color: #d1d5db;
      }
      
      .text-gray-500 {
        color: #9ca3af;
      }
      
      .text-gray-400 {
        color: #9ca3af;
      }
      
      .text-gray-900 {
        color: #f9fafb;
      }
      
      .text-gray-800 {
        color: #f3f4f6;
      }
      
      .text-green-600 {
        color: #4ade80;
      }
      
      .text-yellow-600 {
        color: #fbbf24;
      }
      
      /* Background colors */
      .bg-gray-900 {
        background-color: #111827;
      }
      
      .bg-gray-800 {
        background-color: #1f2937;
      }
      
      .bg-gray-700 {
        background-color: #374151;
      }
      
      .bg-green-100 {
        background-color: #14532d;
        color: #86efac;
      }
      
      .bg-yellow-100 {
        background-color: #78350f;
        color: #fde68a;
      }
      
      /* Borders */
      .border-gray-700 {
        border-color: #374151;
      }
      
      .divide-gray-700 {
        border-color: #374151;
      }
      
      /* Hover states */
      .hover\:bg-gray-800:hover {
        background-color: #1f2937;
      }
      
      .hover\:text-blue-500:hover {
        color: #3b82f6;
      }
    </style>
  </head>
  <body>
    <!-- Sidebar Navigation -->
    <div
      id="sidebar-nav"
      class="sidebar fixed top-0 left-0 h-full w-64 bg-gray-900 border-r border-gray-700 p-6 flex-col items-start space-y-8 z-50 transform -translate-x-full md:translate-x-0 transition-transform duration-300 ease-in-out"
    >
      <div class="flex items-center justify-between w-full">
        <span class="text-2xl font-bold text-[#3b74ff]">Phluowise</span>
        <button
          id="desktopMenuToggle"
          class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"
          aria-label="Toggle navigation menu"
          aria-expanded="false"
          aria-controls="sidebar-nav"
        >
          <svg
            class="w-6 h-6 text-gray-800 dark:text-gray-200"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M4 6h16M4 12h16m-7 6h7"
            ></path>
          </svg>
        </button>
      </div>
      <div class="flex flex-col space-y-4 w-full">
        <a
          href="#"
          class="flex items-center space-x-3 text-lg text-gray-200 hover:text-[#3b74ff] font-medium p-2 rounded-lg hover:bg-gray-700 transition-colors"
        >
          <svg
            class="w-6 h-6"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z"
            ></path>
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M20.488 9H15V3.512A9.025 9.025 0 0120.488 9z"
            ></path>
          </svg>
          <span>Dashboard</span>
        </a>
        <a
          href="profile.html"
          class="flex items-center space-x-3 text-lg text-gray-200 hover:text-[#3b74ff] font-medium p-2 rounded-lg hover:bg-gray-700 transition-colors"
        >
          <svg
            class="w-6 h-6"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"
            ></path>
          </svg>
          <span>Profile</span>
        </a>
        <a
          href="#"
          class="flex items-center space-x-3 text-lg text-gray-200 hover:text-[#3b74ff] font-medium p-2 rounded-lg hover:bg-gray-700 transition-colors"
        >
          <svg
            class="w-6 h-6"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"
            ></path>
          </svg>
          <span>Profile</span>
        </a>
        <a
          href="https://phluowise.com"
          target="_blank"
          class="flex items-center space-x-3 text-lg text-gray-200 hover:text-[#3b74ff] font-medium p-2 rounded-lg hover:bg-gray-700 transition-colors"
        >
          <svg
            class="w-6 h-6"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"
            ></path>
          </svg>
          <span>Phluowise Website</span>
        </a>
      </div>
    </div>

    <!-- Main Dashboard Container -->
    <main
      id="main-content"
      class="ml-0 md:ml-64 p-4 md:p-8 transition-all duration-300 ease-in-out"
    >
      <!-- Mobile Menu Button -->
      <div class="flex items-center justify-between md:hidden mb-4">
        <h1 class="text-xl font-bold text-[#3b74ff]">Phluowise</h1>
        <button
          id="mobileMenuToggle"
          class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"
          aria-label="Toggle navigation menu"
          aria-expanded="false"
          aria-controls="sidebar-nav"
        >
          <svg
            class="w-6 h-6 text-gray-800 dark:text-gray-200"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M4 6h16M4 12h16m-7 6h7"
            ></path>
          </svg>
        </button>
      </div>

      <!-- Main content grid with gap for margin -->
      <div class="max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-8">
        <!-- User and Referral Section -->
        <div class="md:col-span-1">
          <!-- Welcome Card -->
          <div class="dashboard-card glass">
            <h2 class="text-2xl font-bold mb-2">Welcome, <span id="userName">John Doe</span></h2>
            <p class="text-gray-400 mb-4">Track your referrals and earnings</p>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
              <div class="bg-gray-800 p-4 rounded-lg">
                <p class="text-gray-400 text-sm">Total Referrals</p>
                <p class="text-2xl font-bold text-blue-400">24</p>
              </div>
              <div class="bg-gray-800 p-4 rounded-lg">
                <p class="text-gray-400 text-sm">Active Referrals</p>
                <p class="text-2xl font-bold text-green-400">18</p>
              </div>
              <div class="bg-gray-800 p-4 rounded-lg">
                <p class="text-gray-400 text-sm">Your Rank</p>
                <p class="text-2xl font-bold text-yellow-400">#15</p>
              </div>
            </div>
          </div>

          <!-- Team Management Section (Leader Only) -->
          <div id="teamManagementSection" class="dashboard-card glass hidden">
            <h2 class="text-2xl font-bold mb-4">Team Management</h2>
            <p class="text-gray-600 dark:text-gray-300 mb-4">
              Team ID:
              <span
                id="teamIdDisplay"
                class="font-mono text-sm break-all"
              ></span>
            </p>

            <div class="mb-6">
              <h3 class="font-semibold text-lg mb-2">Add Team Member</h3>
              <div class="flex space-x-2">
                <input
                  type="email"
                  id="newMemberEmail"
                  placeholder="Enter member's email"
                  class="form-input dark:bg-gray-800 dark:text-white dark:border-gray-600"
                />
                <button id="addMemberBtn" class="btn-primary flex-shrink-0">
                  Add
                </button>
              </div>
            </div>

            <div>
              <h3 class="font-semibold text-lg mb-2">
                Team Members (<span id="memberCount">0</span>/5)
              </h3>
              <ul id="memberList" class="space-y-2"></ul>
            </div>
          </div>
        </div>

        <!-- Referrals and Payments Section -->
        <div class="md:col-span-2 flex flex-col gap-8">
          <!-- Referrals List -->
          <div class="dashboard-card glass">
            <h2 class="text-2xl font-bold mb-4">Your Referrals</h2>
            <div class="overflow-x-auto">
              <table
                class="min-w-full divide-y divide-gray-200 dark:divide-gray-700"
              >
                <thead>
                  <tr
                    class="text-left text-xs font-semibold uppercase tracking-wider text-gray-500 dark:text-gray-400"
                  >
                    <th class="py-3 px-4">Company</th>
                    <th class="py-3 px-4">Location</th>
                    <th class="py-3 px-4">Amount</th>
                    <th class="py-3 px-4">Date</th>
                  </tr>
                </thead>
                <tbody
                  id="referralTableBody"
                  class="divide-y divide-gray-200 dark:divide-gray-700"
                >
                  <!-- Referral data will be populated here -->
                </tbody>
              </table>
              <p
                id="noReferralsMessage"
                class="text-center text-gray-500 dark:text-gray-400 mt-4 hidden"
              >
                No referrals yet.
              </p>
            </div>
          </div>

          <!-- Earnings Card -->
          <div class="dashboard-card glass">
            <div class="flex justify-between items-center mb-4">
              <h2 class="text-xl font-bold">Your Earnings</h2>
              <span class="text-green-400 font-semibold">+12.5% from last month</span>
            </div>
            <div class="h-48 bg-gray-800 rounded-lg p-4 mb-4">
              <canvas id="earningsChart"></canvas>
            </div>
            <div class="grid grid-cols-3 gap-4 mt-4">
              <div class="text-center">
                <p class="text-gray-400 text-sm">This Month</p>
                <p class="text-lg font-semibold text-green-400">$2,450</p>
              </div>
              <div class="text-center">
                <p class="text-gray-400 text-sm">Last Month</p>
                <p class="text-lg font-semibold">$2,180</p>
              </div>
              <div class="text-center">
                <p class="text-gray-400 text-sm">Total</p>
                <p class="text-lg font-semibold text-blue-400">$18,750</p>
              </div>
            </div>
          </div>

          <!-- Team Leaderboard -->
          <div class="dashboard-card glass">
            <div class="flex justify-between items-center mb-4">
              <h2 class="text-xl font-bold">Team Leaderboard</h2>
              <span class="text-sm text-blue-400">Updated 5 min ago</span>
            </div>
            <div class="space-y-3">
              <!-- 1st Place -->
              <div class="flex items-center justify-between p-3 bg-gradient-to-r from-yellow-800/30 to-yellow-900/10 rounded-lg border border-yellow-500/30">
                <div class="flex items-center space-x-3">
                  <div class="w-8 h-8 rounded-full bg-yellow-500 flex items-center justify-center text-yellow-100 font-bold">1</div>
                  <div>
                    <p class="font-medium">Aqua Warriors</p>
                    <p class="text-sm text-yellow-300">24,500 pts</p>
                  </div>
                </div>
                <div class="text-right">
                  <span class="text-yellow-400 font-bold text-lg">#1</span>
                  <p class="text-xs text-yellow-400">+1,250 this week</p>
                </div>
              </div>
              
              <!-- 2nd Place -->
              <div class="flex items-center justify-between p-3 bg-gradient-to-r from-gray-800/30 to-gray-900/10 rounded-lg border border-gray-600/30">
                <div class="flex items-center space-x-3">
                  <div class="w-8 h-8 rounded-full bg-gray-500 flex items-center justify-center text-gray-100 font-bold">2</div>
                  <div>
                    <p class="font-medium">Water Masters</p>
                    <p class="text-sm text-gray-300">22,150 pts</p>
                  </div>
                </div>
                <div class="text-right">
                  <span class="text-gray-400 font-bold text-lg">#2</span>
                  <p class="text-xs text-gray-400">+980 this week</p>
                </div>
              </div>
              
              <!-- 3rd Place -->
              <div class="flex items-center justify-between p-3 bg-gradient-to-r from-amber-800/30 to-amber-900/10 rounded-lg border border-amber-500/30">
                <div class="flex items-center space-x-3">
                  <div class="w-8 h-8 rounded-full bg-amber-600 flex items-center justify-center text-amber-100 font-bold">3</div>
                  <div>
                    <p class="font-medium">Hydro Kings</p>
                    <p class="text-sm text-amber-300">20,890 pts</p>
                  </div>
                </div>
                <div class="text-right">
                  <span class="text-amber-400 font-bold text-lg">#3</span>
                  <p class="text-xs text-amber-400">+1,120 this week</p>
                </div>
              </div>
              
              <!-- 4th Place (Your Team) -->
              <div class="flex items-center justify-between p-3 bg-gradient-to-r from-blue-900/30 to-blue-900/10 rounded-lg border border-blue-500/30">
                <div class="flex items-center space-x-3">
                  <div class="w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center text-blue-100 font-bold">4</div>
                  <div>
                    <p class="font-medium">Your Team</p>
                    <p class="text-sm text-blue-300">18,750 pts</p>
                  </div>
                </div>
                <div class="text-right">
                  <span class="text-blue-400 font-bold text-lg">#4</span>
                  <p class="text-xs text-blue-400">+1,450 this week</p>
                </div>
              </div>
              
              <!-- 5th Place -->
              <div class="flex items-center justify-between p-3 bg-gray-800/30 rounded-lg hover:bg-gray-700/30 transition-colors">
                <div class="flex items-center space-x-3">
                  <div class="w-8 h-8 rounded-full bg-gray-700 flex items-center justify-center text-gray-300 font-bold">5</div>
                  <div>
                    <p class="font-medium">Oceanic Elite</p>
                    <p class="text-sm text-gray-400">17,200 pts</p>
                  </div>
                </div>
                <div class="text-right">
                  <span class="text-gray-400 font-bold">#5</span>
                  <p class="text-xs text-gray-500">+890 this week</p>
                </div>
              </div>
            </div>
            <div class="mt-4 text-center">
              <button class="text-blue-400 hover:text-blue-300 text-sm font-medium">View Full Leaderboard →</button>
            </div>
          </div>

          <!-- Payment Section -->
          <div class="dashboard-card glass">
            <h2 class="text-2xl font-bold mb-4">Your Earnings</h2>
            <div class="flex items-center justify-between mb-6">
              <div>
                <p class="text-sm text-gray-500 dark:text-gray-400">
                  Total Unpaid Balance
                </p>
                <p
                  id="totalEarnings"
                  class="text-4xl font-bold text-green-600 dark:text-green-400"
                >
                  US$0.00
                </p>
              </div>
              <button id="requestPaymentBtn" class="btn-primary">
                Request Payment
              </button>
            </div>

            <div>
              <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold">Payment Logs</h3>
                <span class="text-sm text-blue-400">Recent Transactions</span>
              </div>
              <div class="overflow-x-auto">
                <table class="min-w-full divide-y divide-gray-700">
                  <thead>
                    <tr class="text-left text-xs font-semibold uppercase tracking-wider text-gray-400">
                      <th class="py-3 px-4">Date</th>
                      <th class="py-3 px-4">Amount</th>
                      <th class="py-3 px-4">Status</th>
                      <th class="py-3 px-4">Type</th>
                      <th class="py-3 px-4 text-right">Action</th>
                    </tr>
                  </thead>
                  <tbody id="paymentLogTableBody" class="divide-y divide-gray-800">
                    <tr class="hover:bg-gray-800/50">
                      <td class="py-3 px-4 text-sm text-gray-300">2025-08-28</td>
                      <td class="py-3 px-4 text-sm font-medium text-green-400">$1,200.00</td>
                      <td class="py-3 px-4">
                        <span class="px-2 py-1 text-xs font-medium rounded-full bg-green-900/30 text-green-400">
                          Completed
                        </span>
                      </td>
                      <td class="py-3 px-4 text-sm text-gray-400">Withdrawal</td>
                      <td class="py-3 px-4 text-right">
                        <button class="text-blue-400 hover:text-blue-300 text-sm">View</button>
                      </td>
                    </tr>
                    <tr class="hover:bg-gray-800/50">
                      <td class="py-3 px-4 text-sm text-gray-300">2025-08-21</td>
                      <td class="py-3 px-4 text-sm font-medium text-green-400">$850.00</td>
                      <td class="py-3 px-4">
                        <span class="px-2 py-1 text-xs font-medium rounded-full bg-green-900/30 text-green-400">
                          Completed
                        </span>
                      </td>
                      <td class="py-3 px-4 text-sm text-gray-400">Withdrawal</td>
                      <td class="py-3 px-4 text-right">
                        <button class="text-blue-400 hover:text-blue-300 text-sm">View</button>
                      </td>
                    </tr>
                    <tr class="hover:bg-gray-800/50">
                      <td class="py-3 px-4 text-sm text-gray-300">2025-08-14</td>
                      <td class="py-3 px-4 text-sm font-medium text-yellow-400">$1,500.00</td>
                      <td class="py-3 px-4">
                        <span class="px-2 py-1 text-xs font-medium rounded-full bg-yellow-900/30 text-yellow-400">
                          Pending
                        </span>
                      </td>
                      <td class="py-3 px-4 text-sm text-gray-400">Withdrawal</td>
                      <td class="py-3 px-4 text-right">
                        <button class="text-blue-400 hover:text-blue-300 text-sm">View</button>
                      </td>
                    </tr>
                  </tbody>
                </table>
                <div class="mt-4 text-center">
                  <button class="text-blue-400 hover:text-blue-300 text-sm font-medium">View All Transactions →</button>
                </div>
              </div>
            </div>
          </div>

          <!-- Team Leaderboard -->
          <div class="dashboard-card glass">
            <div class="flex justify-between items-center mb-4">
              <h2 class="text-2xl font-bold">Team Leaderboard</h2>
              <span class="text-sm text-blue-400">Updated 5 min ago</span>
            </div>
            <div class="space-y-3">
              <!-- 1st Place -->
              <div class="flex items-center justify-between p-3 bg-gradient-to-r from-yellow-800/30 to-yellow-900/10 rounded-lg border border-yellow-500/30">
                <div class="flex items-center space-x-3">
                  <div class="w-8 h-8 rounded-full bg-yellow-500 flex items-center justify-center text-yellow-100 font-bold">1</div>
                  <div>
                    <p class="font-medium">Aqua Warriors</p>
                    <p class="text-sm text-yellow-300">24,500 pts</p>
                  </div>
                </div>
                <div class="text-right">
                  <span class="text-yellow-400 font-bold text-lg">#1</span>
                  <p class="text-xs text-yellow-400">+1,250 this week</p>
                </div>
              </div>
              
              <!-- 2nd Place -->
              <div class="flex items-center justify-between p-3 bg-gradient-to-r from-gray-800/30 to-gray-900/10 rounded-lg border border-gray-600/30">
                <div class="flex items-center space-x-3">
                  <div class="w-8 h-8 rounded-full bg-gray-500 flex items-center justify-center text-gray-100 font-bold">2</div>
                  <div>
                    <p class="font-medium">Water Masters</p>
                    <p class="text-sm text-gray-300">22,150 pts</p>
                  </div>
                </div>
                <div class="text-right">
                  <span class="text-gray-400 font-bold text-lg">#2</span>
                  <p class="text-xs text-gray-400">+980 this week</p>
                </div>
              </div>
              
              <!-- 3rd Place -->
              <div class="flex items-center justify-between p-3 bg-gradient-to-r from-amber-800/30 to-amber-900/10 rounded-lg border border-amber-500/30">
                <div class="flex items-center space-x-3">
                  <div class="w-8 h-8 rounded-full bg-amber-600 flex items-center justify-center text-amber-100 font-bold">3</div>
                  <div>
                    <p class="font-medium">Hydro Kings</p>
                    <p class="text-sm text-amber-300">20,890 pts</p>
                  </div>
                </div>
                <div class="text-right">
                  <span class="text-amber-400 font-bold text-lg">#3</span>
                  <p class="text-xs text-amber-400">+1,120 this week</p>
                </div>
              </div>
              
              <!-- 4th Place (Your Team) -->
              <div class="flex items-center justify-between p-3 bg-gradient-to-r from-blue-900/30 to-blue-900/10 rounded-lg border border-blue-500/30">
                <div class="flex items-center space-x-3">
                  <div class="w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center text-blue-100 font-bold">4</div>
                  <div>
                    <p class="font-medium">Your Team</p>
                    <p class="text-sm text-blue-300">18,750 pts</p>
                  </div>
                </div>
                <div class="text-right">
                  <span class="text-blue-400 font-bold text-lg">#4</span>
                  <p class="text-xs text-blue-400">+1,450 this week</p>
                </div>
              </div>
              
              <!-- 5th Place -->
              <div class="flex items-center justify-between p-3 bg-gray-800/30 rounded-lg hover:bg-gray-700/30 transition-colors">
                <div class="flex items-center space-x-3">
                  <div class="w-8 h-8 rounded-full bg-gray-700 flex items-center justify-center text-gray-300 font-bold">5</div>
                  <div>
                    <p class="font-medium">Oceanic Elite</p>
                    <p class="text-sm text-gray-400">17,200 pts</p>
                  </div>
                </div>
                <div class="text-right">
                  <span class="text-gray-400 font-bold">#5</span>
                  <p class="text-xs text-gray-500">+890 this week</p>
                </div>
              </div>
            </div>
            <div class="mt-4 text-center">
              <button class="text-blue-400 hover:text-blue-300 text-sm font-medium">View Full Leaderboard →</button>
            </div>
            </p>
          </div>
        </div>
      </div>
    </main>

    <!-- Modal for messages and confirmation -->
    <div
      id="modal"
      class="fixed inset-0 bg-gray-900 bg-opacity-50 hidden items-center justify-center p-4 z-50"
    >
      <div
        class="bg-white dark:bg-gray-800 rounded-xl p-8 max-w-sm w-full shadow-xl"
      >
        <h3 id="modalTitle" class="text-lg font-bold mb-4"></h3>
        <p id="modalMessage" class="text-gray-600 dark:text-gray-300 mb-6"></p>
        <div class="flex justify-end space-x-4">
          <button
            id="modalCloseBtn"
            class="btn-secondary dark:bg-gray-700 dark:text-white"
          >
            Close
          </button>
        </div>
      </div>
    </div>

    <!-- Dummy Data -->
    <script>
      // Dummy data structure
      const dummyData = {
        user: {
          name: 'John Doe',
          email: 'john@example.com',
          points: 1250,
          rank: 'Gold Member',
          referralCode: 'PHLUO123',
          teamId: 'TEAM001',
          role: 'leader',
          earnings: 1250,
          pendingEarnings: 500
        },
        referrals: [
          { 
            id: 1, 
            company: 'AquaPure Solutions', 
            location: 'New York, NY', 
            amount: '$500', 
            date: '2023-06-15',
            status: 'Completed'
          },
          { 
            id: 2, 
            company: 'BlueWave Technologies', 
            location: 'San Francisco, CA', 
            amount: '$250', 
            date: '2023-07-22',
            status: 'Pending'
          },
          { 
            id: 3, 
            company: 'ClearH2O Systems', 
            location: 'Chicago, IL', 
            amount: '$500', 
            date: '2023-08-10',
            status: 'Completed'
          }
        ],
        payments: [
          {
            id: 1,
            date: '2023-08-01',
            amount: '$750',
            status: 'Paid',
            method: 'Bank Transfer'
          },
          {
            id: 2,
            date: '2023-07-01',
            amount: '$500',
            status: 'Paid',
            method: 'PayPal'
          }
        ],
        team: {
          name: 'Aqua Warriors',
          members: [
            { id: 'u1', name: 'John Doe', email: 'john@example.com', role: 'leader', joinDate: '2023-01-15' },
            { id: 'u2', name: 'Alice Smith', email: 'alice@example.com', role: 'member', joinDate: '2023-05-15' },
            { id: 'u3', name: 'Bob Johnson', email: 'bob@example.com', role: 'member', joinDate: '2023-06-20' },
            { id: 'u4', name: 'Sarah Williams', email: 'sarah@example.com', role: 'member', joinDate: '2023-07-10' }
          ],
          totalEarnings: 2000,
          rank: 15
        }
      };

      // Utility functions
      function showSuccess(message) {
        Swal.fire({
          icon: 'success',
          title: 'Success!',
          text: message,
          confirmButtonColor: '#3b74ff',
        });
      }

      function showError(message) {
        Swal.fire({
          icon: 'error',
          title: 'Error',
          text: message,
          confirmButtonColor: '#ef4444',
        });
      }

      function showConfirm(title, text, confirmText = 'Yes, proceed') {
        return Swal.fire({
          title: title,
          text: text,
          icon: 'warning',
          showCancelButton: true,
          confirmButtonColor: '#3b74ff',
          cancelButtonColor: '#6b7280',
          confirmButtonText: confirmText,
          cancelButtonText: 'Cancel'
        });
      }

      // Initialize the application
      document.addEventListener('DOMContentLoaded', function() {
        loadDashboard();
        setupEventListeners();
      });

      function loadDashboard() {
        try {
          // Load user data
          document.getElementById('userName').textContent = dummyData.user.name;
          document.getElementById('userEmail').textContent = dummyData.user.email;
          document.getElementById('userPoints').textContent = dummyData.user.points.toLocaleString();
          document.getElementById('userRank').textContent = dummyData.user.rank;
          
          // Set referral link
          const referralLink = `${window.location.origin}?ref=${dummyData.user.referralCode}`;
          document.getElementById('referralLink').value = referralLink;
          
          // Load referrals
          const referralTableBody = document.getElementById('referralTableBody');
          referralTableBody.innerHTML = dummyData.referrals.map(ref => `
            <tr class="hover:bg-gray-800">
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm font-medium text-gray-900">${ref.company}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm text-gray-500">${ref.location}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm text-gray-500">${ref.amount}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm text-gray-500">${new Date(ref.date).toLocaleDateString()}</div>
              </td>
            </tr>
          `).join('');

          // Load team info
          document.getElementById('teamName').textContent = dummyData.team.name;
          document.getElementById('totalEarnings').textContent = `$${dummyData.user.earnings.toLocaleString()}`;
          document.getElementById('pendingEarnings').textContent = `$${dummyData.user.pendingEarnings.toLocaleString()}`;
          
          // Load team members
          const memberList = document.getElementById('memberList');
          memberList.innerHTML = dummyData.team.members.map(member => `
            <li class="py-3 flex justify-between items-center">
              <div>
                <p class="text-sm font-medium text-gray-900">${member.name}</p>
                <p class="text-xs text-gray-500">${member.email}</p>
              </div>
              ${member.role === 'leader' ? 
                '<span class="px-2 py-1 text-xs font-semibold text-green-800 bg-green-100 rounded-full">Leader</span>' : 
                `<button class="transfer-btn px-3 py-1 text-xs bg-blue-100 text-blue-800 rounded-full hover:bg-blue-200" data-member-id="${member.id}">
                  Make Leader
                </button>`}
            </li>
          `).join('');

          // Load payment logs
          const paymentLogTableBody = document.getElementById('paymentLogTableBody');
          paymentLogTableBody.innerHTML = dummyData.payments.map(payment => `
            <tr class="hover:bg-gray-800">
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                ${new Date(payment.date).toLocaleDateString()}
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                ${payment.amount}
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full 
                  ${payment.status === 'Paid' ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800'}">
                  ${payment.status}
                </span>
              </td>
            </tr>
          `).join('');

        } catch (error) {
          console.error('Error loading dashboard:', error);
          showError('Failed to load dashboard. Please try again.');
        }
      }

      function setupEventListeners() {
        // Copy referral link
        document.getElementById('copyLinkBtn').addEventListener('click', () => {
          const referralLink = document.getElementById('referralLink');
          referralLink.select();
          document.execCommand('copy');
          showSuccess('Referral link copied to clipboard!');
        });

        // Request payment
        document.getElementById('requestPaymentBtn').addEventListener('click', async () => {
          if (dummyData.user.pendingEarnings === 0) {
            showError('No pending earnings available for withdrawal.');
            return;
          }

          const result = await showConfirm(
            'Request Payment',
            `Are you sure you want to request a payment of $${dummyData.user.pendingEarnings}?`,
            'Yes, request payment'
          );

          if (result.isConfirmed) {
            // In a real app, this would be an API call
            const newPayment = {
              id: Date.now(),
              date: new Date().toISOString().split('T')[0],
              amount: `$${dummyData.user.pendingEarnings}`,
              status: 'Pending',
              method: 'Bank Transfer'
            };
            
            dummyData.payments.unshift(newPayment);
            dummyData.user.earnings += dummyData.user.pendingEarnings;
            dummyData.user.pendingEarnings = 0;
            
            loadDashboard();
            showSuccess('Payment request submitted successfully!');
          }
        });

        // Handle transfer leadership
        document.addEventListener('click', async (e) => {
          if (e.target.classList.contains('transfer-btn')) {
            const memberId = e.target.dataset.memberId;
            const member = dummyData.team.members.find(m => m.id === memberId);
            
            if (!member) {
              showError('Member not found');
              return;
            }

            const result = await showConfirm(
              'Transfer Leadership',
              `Are you sure you want to make ${member.name} the new team leader?`,
              'Yes, transfer leadership'
            );

            if (result.isConfirmed) {
              // Update roles
              const currentLeader = dummyData.team.members.find(m => m.role === 'leader');
              if (currentLeader) currentLeader.role = 'member';
              member.role = 'leader';
              
              // Update user role if it's the current user
              if (dummyData.user.id === memberId) {
                dummyData.user.role = 'leader';
              }
              
              // Reload the dashboard to reflect changes
              loadDashboard();
              showSuccess(`Leadership transferred to ${member.name} successfully!`);
            }
          }
        });
      }
    </script>

    <!-- Firebase SDKs -->
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
      import {
        getAuth,
        signInAnonymously,
        signInWithCustomToken,
        onAuthStateChanged,
      } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
      import {
        getFirestore,
        doc,
        getDoc,
        setDoc,
        onSnapshot,
        collection,
        query,
        addDoc,
      } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

      // --- Global Variables ---
      const appId =
        typeof __app_id !== "undefined" ? __app_id : "default-app-id";
      const firebaseConfig = JSON.parse(
        typeof __firebase_config !== "undefined" ? __firebase_config : "{}"
      );
      const initialAuthToken =
        typeof __initial_auth_token !== "undefined"
          ? __initial_auth_token
          : null;

      let app;
      let db;
      let auth;
      let userId = null;
      let userRole = "member";
      let teamId = null;

      // --- DOM Elements ---
      const userNameEl = document.getElementById("userName");
      const userIdDisplayEl = document.getElementById("userIdDisplay");
      const userRoleEl = document.getElementById("userRole");
      const referralLinkInput = document.getElementById("referralLinkInput");
      const referralSection = document.getElementById("referralSection");
      const teamManagementSection = document.getElementById(
        "teamManagementSection"
      );
      const teamIdDisplayEl = document.getElementById("teamIdDisplay");
      const memberCountEl = document.getElementById("memberCount");
      const memberListEl = document.getElementById("memberList");
      const newMemberEmailInput = document.getElementById("newMemberEmail");
      const referralTableBody = document.getElementById("referralTableBody");
      const totalEarningsEl = document.getElementById("totalEarnings");
      const paymentLogTableBody = document.getElementById(
        "paymentLogTableBody"
      );
      const noReferralsMessage = document.getElementById("noReferralsMessage");
      const noPaymentLogsMessage = document.getElementById(
        "noPaymentLogsMessage"
      );

      // Modal
      const modal = document.getElementById("modal");
      const modalTitle = document.getElementById("modalTitle");
      const modalMessage = document.getElementById("modalMessage");
      const modalCloseBtn = document.getElementById("modalCloseBtn");
      modalCloseBtn.onclick = () => modal.classList.add("hidden");

      // Sidebar and Menu Toggle
      const menuToggle = document.getElementById("menuToggle");
      const sidebar = document.getElementById("sidebar-nav");
      menuToggle.addEventListener("click", () => {
        sidebar.classList.toggle("-translate-x-full");
      });

      // Dark Mode
      const darkModeToggle = document.getElementById("darkModeToggle");
      const moonIcon = document.getElementById("moonIcon");
      const sunIcon = document.getElementById("sunIcon");

      function toggleDarkMode() {
        const isDarkMode = document.body.classList.toggle("dark");
        const cards = document.querySelectorAll(".dashboard-card");
        cards.forEach((card) => card.classList.toggle("dark", isDarkMode));

        if (isDarkMode) {
          moonIcon.classList.add("hidden");
          sunIcon.classList.remove("hidden");
          localStorage.setItem("theme", "dark");
        } else {
          moonIcon.classList.remove("hidden");
          sunIcon.classList.add("hidden");
          localStorage.setItem("theme", "light");
        }
      }

      darkModeToggle.addEventListener("click", toggleDarkMode);

      // Check for saved theme preference and apply it on load
      const savedTheme = localStorage.getItem("theme");
      if (savedTheme === "dark") {
        document.body.classList.add("dark");
      }

      // --- Utility Functions ---
      function showModal(title, message) {
        modalTitle.textContent = title;
        modalMessage.textContent = message;
        modal.classList.remove("hidden");
      }

      // --- Firebase Initialization and Auth ---
      window.onload = async function () {
        try {
          if (Object.keys(firebaseConfig).length === 0) {
            console.error("Firebase config not available. Cannot initialize.");
            return;
          }
          app = initializeApp(firebaseConfig);
          db = getFirestore(app);
          auth = getAuth(app);

          onAuthStateChanged(auth, async (user) => {
            if (user) {
              userId = user.uid;
              // Check for existing profile document
              const userDocRef = doc(
                db,
                `artifacts/${appId}/users/${userId}/data`,
                "profile"
              );
              const docSnap = await getDoc(userDocRef);

              if (!docSnap.exists()) {
                // This is a brand new user, check for referral link or create as a new leader
                const urlParams = new URLSearchParams(window.location.search);
                const teamIdFromUrl = urlParams.get("ref_team_id");
                const teamNameFromUrl = urlParams.get("ref_team_name");

                if (teamIdFromUrl && teamNameFromUrl) {
                  // New member via referral
                  console.log("New user signing up with referral link.");
                  await setDoc(userDocRef, {
                    role: "member",
                    teamId: teamIdFromUrl,
                    teamName: teamNameFromUrl,
                    referrals: [],
                    payments: [],
                  });
                } else {
                  // New leader, create profile and a new team
                  console.log("New user signing up as a team leader.");
                  const newTeamId = crypto.randomUUID();
                  const teamName = `Team-${newTeamId.substring(0, 4)}`;

                  await setDoc(userDocRef, {
                    role: "leader",
                    teamId: newTeamId,
                    teamName: teamName,
                    referrals: [],
                    payments: [],
                  });

                  await setDoc(
                    doc(db, `artifacts/${appId}/public/data/teams`, newTeamId),
                    {
                      leaderId: userId,
                      teamName: teamName,
                      members: [],
                      totalEarnings: 0,
                    }
                  );
                  console.log("New team created for leader.");
                }
              }

              // Now that we are sure the user profile exists, set up the real-time listener
              onSnapshot(userDocRef, (profileSnap) => {
                if (profileSnap.exists()) {
                  const userData = profileSnap.data();
                  userRole = userData.role;
                  teamId = userData.teamId;

                  userNameEl.textContent = `User ${userId.substring(0, 8)}`;
                  userIdDisplayEl.textContent = userId;
                  userRoleEl.textContent =
                    userRole.charAt(0).toUpperCase() + userRole.slice(1);

                  referralSection.classList.remove("hidden");
                  teamManagementSection.classList.add("hidden");
                  if (userRole === "leader") {
                    teamManagementSection.classList.remove("hidden");
                  }

                  if (teamId) {
                    fetchAndDisplayTeamData(teamId);
                  }

                  displayReferrals(userData.referrals || []);
                  displayPaymentLogs(userData.payments || []);
                } else {
                  console.error(
                    "User profile document not found after initial creation. This should not happen."
                  );
                }
              });
            } else {
              // Sign in anonymously or with custom token
              if (initialAuthToken) {
                await signInWithCustomToken(auth, initialAuthToken);
              } else {
                await signInAnonymously(auth);
              }
            }
          });
        } catch (error) {
          console.error("Firebase initialization failed:", error);
          showModal(
            "Initialization Error",
            "Failed to connect to the database. Please check the console for details."
          );
        }
      };

      function fetchAndDisplayTeamData(tid) {
        const teamDocRef = doc(db, `artifacts/${appId}/public/data/teams`, tid);
        onSnapshot(teamDocRef, (docSnap) => {
          if (docSnap.exists()) {
            const teamData = docSnap.data();
            teamIdDisplayEl.textContent = tid;
            displayTeamMembers(teamData.members || [], teamData.leaderId);
            generateReferralLink(tid, teamData.teamName);
          } else {
            console.log(
              "Team document not found, it might be created later by the team leader."
            );
            teamIdDisplayEl.textContent = "N/A";
            displayTeamMembers([], null);
            referralLinkInput.value = "Team leader has not logged in yet.";
          }
        });
      }

      function generateReferralLink(tid, teamName) {
        const baseUrl = window.location.origin + window.location.pathname;
        const referralLink = `${baseUrl}?ref_team_id=${tid}&ref_team_name=${encodeURIComponent(
          teamName
        )}`;
        referralLinkInput.value = referralLink;
      }

      function displayReferrals(referrals) {
        referralTableBody.innerHTML = "";
        if (referrals.length === 0) {
          noReferralsMessage.classList.remove("hidden");
          totalEarningsEl.textContent = `US$0.00`;
          return;
        }
        noReferralsMessage.classList.add("hidden");
        let total = 0;
        referrals.forEach((referral) => {
          const row = document.createElement("tr");
          row.innerHTML = `
                    <td class="py-3 px-4">${referral.companyName}</td>
                    <td class="py-3 px-4">${referral.location}</td>
                    <td class="py-3 px-4 text-green-600 dark:text-green-400 font-semibold">$${referral.amount.toFixed(
                      2
                    )}</td>
                    <td class="py-3 px-4">${new Date(
                      referral.date
                    ).toLocaleDateString()}</td>
                `;
          referralTableBody.appendChild(row);
          total += referral.amount;
        });
        totalEarningsEl.textContent = `US$${total.toFixed(2)}`;
      }

      function displayPaymentLogs(payments) {
        paymentLogTableBody.innerHTML = "";
        if (payments.length === 0) {
          noPaymentLogsMessage.classList.remove("hidden");
          return;
        }
        noPaymentLogsMessage.classList.add("hidden");
        payments.forEach((payment) => {
          const row = document.createElement("tr");
          row.innerHTML = `
                    <td class="py-3 px-4">${new Date(
                      payment.date
                    ).toLocaleDateString()}</td>
                    <td class="py-3 px-4">$${payment.amount.toFixed(2)}</td>
                    <td class="py-3 px-4">
                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${
                          payment.status === "Paid"
                            ? "bg-green-100 dark:bg-green-700 text-green-800 dark:text-green-200"
                            : "bg-yellow-100 dark:bg-yellow-700 text-yellow-800 dark:text-yellow-200"
                        }">
                            ${payment.status}
                        </span>
                    </td>
                `;
          paymentLogTableBody.appendChild(row);
        });
      }

      function displayTeamMembers(members, leaderId) {
        memberListEl.innerHTML = "";
        memberCountEl.textContent = members.length;
        members.forEach((member) => {
          const isLeader = member.id === leaderId;
          const listItem = document.createElement("li");
          listItem.className = `flex justify-between items-center bg-gray-50 dark:bg-gray-700 p-3 rounded-xl ${
            isLeader ? "ring-2 ring-[#3b74ff]" : ""
          }`;
          listItem.innerHTML = `
                    <span class="font-medium flex-grow">
                        ${member.email || `Member ${member.id.substring(0, 8)}`}
                        ${
                          isLeader
                            ? '<span class="ml-2 text-xs text-[#3b74ff] font-bold"> (Leader)</span>'
                            : ""
                        }
                    </span>
                    <div class="flex space-x-2">
                        <button class="transfer-btn btn-secondary px-3 py-1 text-sm dark:bg-gray-800 dark:text-white ${
                          userRole !== "leader" || isLeader ? "hidden" : ""
                        }" data-member-id="${
            member.id
          }">Transfer Leadership</button>
                    </div>
                `;
          memberListEl.appendChild(listItem);
        });
      }

      // --- Event Listeners ---
      document.getElementById("copyLinkBtn").addEventListener("click", () => {
        referralLinkInput.select();
        document.execCommand("copy");
        showModal(
          "Link Copied!",
          "Your referral link has been copied to your clipboard."
        );
      });

      document
        .getElementById("requestPaymentBtn")
        .addEventListener("click", async () => {
          const total = parseFloat(
            totalEarningsEl.textContent.replace("US$", "")
          );
          if (total <= 0) {
            showModal(
              "No Earnings",
              "You don't have any earnings to request for payment."
            );
            return;
          }
          if (!userId || !teamId) {
            showModal("Error", "Please wait for your profile to load.");
            return;
          }

          const userDocRef = doc(
            db,
            `artifacts/${appId}/users/${userId}/data`,
            "profile"
          );
          const userDocSnap = await getDoc(userDocRef);
          if (userDocSnap.exists()) {
            const userData = userDocSnap.data();
            const newPaymentRequest = {
              amount: total,
              date: new Date().toISOString(),
              status: "Pending",
            };
            const updatedPayments = [
              ...(userData.payments || []),
              newPaymentRequest,
            ];

            await setDoc(
              userDocRef,
              {
                ...userData,
                payments: updatedPayments,
                referrals: [], // Clear referrals after payment request
              },
              { merge: true }
            );

            showModal(
              "Payment Requested",
              `A payment request for US$${total.toFixed(
                2
              )} has been submitted. Please expect it via Mobile Money soon!`
            );
          }
        });

      document
        .getElementById("addMemberBtn")
        .addEventListener("click", async () => {
          const email = newMemberEmailInput.value.trim();
          if (!email) {
            showModal("Error", "Please enter a valid email address.");
            return;
          }
          if (!teamId || !userId) {
            showModal("Error", "Please wait for your team profile to load.");
            return;
          }

          const teamDocRef = doc(
            db,
            `artifacts/${appId}/public/data/teams`,
            teamId
          );
          const teamDocSnap = await getDoc(teamDocRef);
          if (teamDocSnap.exists()) {
            const teamData = teamDocSnap.data();
            if (teamData.members.length >= 5) {
              showModal(
                "Team Full",
                "Your team has reached the maximum number of 5 members."
              );
              return;
            }
            const isMemberAlready = teamData.members.some(
              (member) => member.email === email
            );
            if (isMemberAlready) {
              showModal(
                "Already Member",
                "This email is already on your team."
              );
              return;
            }

            const newMemberId = crypto.randomUUID();
            const updatedMembers = [
              ...(teamData.members || []),
              {
                id: newMemberId,
                email: email,
                role: "member",
              },
            ];

            await setDoc(
              teamDocRef,
              { members: updatedMembers },
              { merge: true }
            );
            newMemberEmailInput.value = "";
            showModal(
              "Member Added",
              `An invitation for ${email} has been added. They will be linked to your team when they register.`
            );
          }
        });

      // Event listener for transferring leadership (using delegation)
      memberListEl.addEventListener("click", async (event) => {
        if (event.target.classList.contains("transfer-btn")) {
          const newLeaderId = event.target.dataset.memberId;
          if (!userId || !teamId || userRole !== "leader") {
            showModal("Error", "You do not have permission to do this.");
            return;
          }

          const teamDocRef = doc(
            db,
            `artifacts/${appId}/public/data/teams`,
            teamId
          );
          const userDocRef = doc(
            db,
            `artifacts/${appId}/users/${userId}/data`,
            "profile"
          );
          const newLeaderDocRef = doc(
            db,
            `artifacts/${appId}/users/${newLeaderId}/data`,
            "profile"
          );

          try {
            // Update team leader
            await setDoc(
              teamDocRef,
              { leaderId: newLeaderId },
              { merge: true }
            );

            // Update roles
            await setDoc(userDocRef, { role: "member" }, { merge: true });
            await setDoc(newLeaderDocRef, { role: "leader" }, { merge: true });

            showModal(
              "Success",
              "Leadership has been transferred successfully."
            );
          } catch (error) {
            console.error("Error transferring leadership:", error);
            showModal(
              "Transfer Error",
              "Could not transfer leadership. Please check the console for details."
            );
          }
        }
      });
    </script>
    <!-- Add Chart.js for the earnings graph -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Custom JavaScript -->
    <script src="js/app.js"></script>
    
    <script>
      // Initialize the page when DOM is loaded
      document.addEventListener('DOMContentLoaded', function() {
        // Initialize earnings chart
        initializeEarningsChart();
        
        // Load payment logs
        loadPaymentLogs();
        
        // Note: loadReferrals() is now called from app.js
      });
      
      // Initialize earnings chart with dummy data
      function initializeEarningsChart() {
        const ctx = document.getElementById('earningsChart');
        if (!ctx) return;
        
        new Chart(ctx, {
          type: 'bar',
          data: {
            labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
            datasets: [{
              label: 'Earnings ($)',
              data: [350, 520, 680, 450, 750, 600, 300],
              backgroundColor: 'rgba(59, 130, 246, 0.7)',
              borderColor: 'rgba(59, 130, 246, 1)',
              borderWidth: 1,
              borderRadius: 6,
              barThickness: 12
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: {
                display: false
              }
            },
            scales: {
              y: {
                beginAtZero: true,
                grid: {
                  color: 'rgba(255, 255, 255, 0.1)'
                },
                ticks: {
                  color: '#9CA3AF',
                  callback: function(value) {
                    return '$' + value;
                  }
                }
              },
              x: {
                grid: {
                  display: false
                },
                ticks: {
                  color: '#9CA3AF'
                }
              }
            }
          }
        });
      }
      
      // Load payment logs with dummy data
      function loadPaymentLogs() {
        const paymentLogs = [
          { id: 1, date: '2025-08-28', amount: '$1,200', status: 'Completed', type: 'Withdrawal' },
          { id: 2, date: '2025-08-21', amount: '$850', status: 'Completed', type: 'Withdrawal' },
          { id: 3, date: '2025-08-14', amount: '$1,500', status: 'Completed', type: 'Withdrawal' },
          { id: 4, date: '2025-08-07', amount: '$950', status: 'Completed', type: 'Withdrawal' },
          { id: 5, date: '2025-07-31', amount: '$1,100', status: 'Completed', type: 'Withdrawal' }
        ];
        
        const tbody = document.getElementById('paymentLogsBody');
        if (!tbody) return;
        
        tbody.innerHTML = paymentLogs.map(log => `
          <tr class="border-b border-gray-700 hover:bg-gray-800/50">
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-300">${log.date}</td>
            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-200">${log.amount}</td>
            <td class="px-6 py-4 whitespace-nowrap">
              <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-900/30 text-green-400">
                ${log.status}
              </span>
            </td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-400">${log.type}</td>
            <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
              <a href="#" class="text-blue-400 hover:text-blue-300">View</a>
            </td>
          </tr>
        `).join('');
      }
    </script>
  </body>
</html>